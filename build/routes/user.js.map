{"version":3,"sources":["../../src/routes/user.js"],"names":["module","exports","app","post","passport","authenticate","session","config","accessLevels","admin","create","login","get","findAllUsers","findById","put","user","update","delete","deleteUser"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;;;AAIAA,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAS;AACxB;AACAA,MAAIC,IAAJ,CACE,mBADF,EAEEC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAFF,EAGE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCC,YAArC,CAHF;;AAMA;AACAR,MAAIC,IAAJ,CAAS,kBAAT,EAA6BQ,WAA7B;;AAEA;AACAT,MAAIU,GAAJ,CACE,YADF,EAEER,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCI,kBAArC,CALF;;AAQA;AACAX,MAAIU,GAAJ,CACE,oBADF,EAEER,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCK,cAArC,CALF;;AAQA;AACAZ,MAAIa,GAAJ,CACE,oBADF,EAEEX,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBQ,IAA9B,EAAoCC,YAApC,CALF;;AAQA;AACAf,MAAIgB,MAAJ,CACE,oBADF,EAEEd,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCU,gBAArC,CALF;AAQD,CA/CD","file":"user.js","sourcesContent":["import passport from 'passport';\nimport config from '../config/config';\nimport { allowOnly } from '../services/routesHelper';\nimport { create, login, findAllUsers, \n    findById, update, deleteUser\n} from '../controllers/user';\n\nmodule.exports = (app) => {\n  // create a new user\n  app.post(\n    '/api/users/create',\n    passport.authenticate('jwt', { session: false }),\n    allowOnly(config.accessLevels.admin, create)\n  );\n\n  // user login\n  app.post('/api/users/login', login);\n\n  //retrieve all users\n  app.get(\n    '/api/users', \n    passport.authenticate('jwt', { \n      session: false \n    }),\n    allowOnly(config.accessLevels.admin, findAllUsers)\n  );\n\n  // retrieve user by id\n  app.get(\n    '/api/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, findById)\n  );\n\n  // update a user with id\n  app.put(\n    '/api/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.user, update)\n  );\n\n  // delete a user\n  app.delete(\n    '/api/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, deleteUser)\n  );\n\n};\n"]}